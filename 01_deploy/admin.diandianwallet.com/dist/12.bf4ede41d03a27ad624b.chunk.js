webpackJsonp([12],{220:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(302),s=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,function(){return n[e]})}(r);var a=i(399),o=i.n(a),l=!1;var d=function(e){l||i(397)},c=i(0)(s.a,o.a,!1,d,"data-v-23df4290",null);c.options.__file="src\\views\\system\\Permission.vue",t.default=c.exports},302:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(22);t.default={data:function(){var e=this;return{columns_first:[{type:"selection",width:60},{title:this.$t("permissionlist.serialnumber"),key:"id",width:80},{title:this.$t("permissionlist.parentid"),key:"parentId"},{title:this.$t("permissionlist.permissiontitle1"),key:"title"},{title:this.$t("permissionlist.permissionname1"),key:"name"},{title:this.$t("permissionlist.permissiondescription1"),key:"description"},{title:this.$t("permissionlist.operation"),key:"action",width:150,align:"center",render:function(t,i){return t("Button",{props:{type:"info",size:"small"},on:{click:function(){e.ifAudit=!0,e.ifAdd=!1,e.id=i.row.id,e.name=i.row.name,e.parentID=i.row.parentId,e.title=i.row.title,e.descript=i.row.description,e.addPermissionBtn()}}},e.$t("perpetualcontractcurrencystandardmanagement.modify"))}}],userpage:[],title:null,name:null,descript:null,parentID:null,queryParentID:null,ifAudit:!1,totalNum:null,current:1,ifLoading:!0,selectArr:[],ifDelete:!1,deleteArr:[],ifAdd:!0,allPermission:[],currentPageIdx:1,keyword:null}},methods:{getAllPermissionFn:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e=[];e.push({id:0,title:"顶级类别"}),(0,n.getAllPermission)().then(function(t){t.code||t.data.forEach(function(t){var i={title:t.title,id:t.id};e.push(i)})}),this.allPermission=e},delPermission:function(){this.deleteArr.length?this.ifDelete=!0:this.$Message.warning(this.$t("permissionlist.notselected"))},selected:function(e){var t=this;this.deleteArr=[],e.forEach(function(e){t.deleteArr.push(e.id)}),console.log(this.deleteArr)},confirmDel:function(){var e=this;(0,n.delPermission)({ids:this.deleteArr}).then(function(t){t.code?e.$Message.error(e.$t("currencysetting.deletionfailed")):(e.refreshPage({pageNo:1,pageSize:10}),e.$Message.success(e.$t("currencysetting.deletionsucceeded")))})},cancelDel:function(){},confirmAudit:function(){var e=this;if(this.title&&this.name&&this.parentID){var t={name:this.name,parentId:this.parentID,title:this.title,description:this.descript};this.ifAdd||(t.id=this.id),(0,n.addAuditPermission)(t).then(function(t){t.code?e.$Message.error(t.message):(e.$Message.success(e.$t("perpetualcontractcurrencystandardmanagement.operationsucceeded")),e.refreshPage({pageNo:1,pageSize:10}),e.name=e.parentID=e.title=e.descript=null)})}else this.$Message.warning(this.$t("systeminformationmaintenance.pleaseimprovetheinformation"))},addPermission:function(){this.ifAdd=!0,this.addPermissionBtn()},addPermissionBtn:function(){var e=this;this.ifAdd&&(this.name=this.parentID=this.title=this.descript=null),this.ifAudit=!0,(0,n.permissionManage)({parentId:0,pageSize:300}).then(function(t){console.log(t),e.selectArr=t.data.content})},refreshPageManual:function(){this.refreshPage({keyword:this.keyword,parentId:this.queryParentID,pageNo:this.currentPageIdx,pageSize:10})},changePage:function(e){this.currentPageIdx=e,this.refreshPage({keyword:this.keyword,parentId:this.queryParentID,pageNo:e,pageSize:10})},refreshPage:function(e){var t=this;this.ifLoading=!0,(0,n.permissionManage)(e).then(function(e){e.code?t.$Message.error(t.$t("permissionlist.errorgettingdata")):(t.totalNum=e.data.totalElements,t.userpage=e.data.content),t.ifLoading=!1})}},created:function(){this.refreshPage({pageNo:1,pageSize:10}),this.getAllPermissionFn()}}},397:function(e,t,i){var n=i(398);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(5)("a6e8abe2",n,!1,{})},398:function(e,t,i){(e.exports=i(4)(!1)).push([e.i,"\n.auditPermissionModal ul li[data-v-23df4290] {\n  position: relative;\n  margin-bottom: 10px;\n}\n.auditPermissionModal ul li span[data-v-23df4290] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-size: 14px;\n  line-height: 32px;\n}\n.auditPermissionModal ul li span i[data-v-23df4290] {\n  margin-right: 5px;\n  font-size: 14px;\n  font-weight: 700;\n  color: red;\n}\n.auditPermissionModal ul li p[data-v-23df4290] {\n  padding-left: 80px;\n  width: 400px;\n}\n",""])},399:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n        "+e._s(e.$t("permissionlist.permissionlist"))+" "),i("Button",{attrs:{type:"primary",size:"small"},on:{click:e.refreshPageManual}},[i("Icon",{attrs:{type:"refresh"}}),e._v("\n            "+e._s(e.$t("perpetualcontractcurrencystandardmanagement.refresh"))+" ")],1)],1),e._v(" "),i("Row",{staticClass:"functionWrapper"},[i("div",{staticClass:"btnsWrapper clearfix"},[i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:e.$t("permissionlist.keywordEnter")},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),i("Select",{staticStyle:{width:"200px"},model:{value:e.queryParentID,callback:function(t){e.queryParentID=t},expression:"queryParentID"}},e._l(e.allPermission,function(t){return i("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.title)+"\n\t\t\t\t")])})),e._v(" "),i("Button",{attrs:{type:"info",size:"small"},on:{click:e.refreshPageManual}},[e._v(e._s(e.$t("positionmanagementcontractassetmanagement.search")))]),e._v(" "),i("Button",{attrs:{type:"error"},on:{click:e.delPermission}},[e._v(e._s(e.$t("permissionlist.deletepermissions")))]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.addPermission}},[e._v(e._s(e.$t("permissionlist.addpermission")))])],1)]),e._v(" "),i("Row",[i("Table",{staticClass:"user_center",attrs:{columns:e.columns_first,data:e.userpage,border:"",loading:e.ifLoading},on:{"on-selection-change":e.selected}})],1),e._v(" "),i("Row",{staticClass:"pageWrapper"},[i("Page",{attrs:{total:e.totalNum,current:e.current,"show-elevator":""},on:{"on-change":e.changePage}})],1),e._v(" "),i("Modal",{staticClass:"auditPermissionModal",attrs:{title:e.$t("permissionlist.editpermissions")},on:{"on-ok":e.confirmAudit},model:{value:e.ifAudit,callback:function(t){e.ifAudit=t},expression:"ifAudit"}},[i("ul",[i("li",[i("span",[i("i",[e._v("*")]),e._v(e._s(e.$t("permissionlist.permissiontitle")))]),e._v(" "),i("p",[i("Input",{model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)]),e._v(" "),i("li",[i("span",[i("i",[e._v("*")]),e._v(e._s(e.$t("permissionlist.permissionname")))]),e._v(" "),i("p",[i("Input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),e._v(" "),i("li",[i("span",[i("i",[e._v("*")]),e._v(e._s(e.$t("permissionlist.permissiondirectory")))]),e._v(" "),i("p",[i("Select",{model:{value:e.parentID,callback:function(t){e.parentID=t},expression:"parentID"}},[i("Option",{staticStyle:{color:"#ec0909"},attrs:{value:"0",label:e.$t("permissionlist.asaprimarydirectory")}},[e._v(e._s(e.$t("permissionlist.makeitaprimarydirectory")))]),e._v(" "),e._l(e.selectArr,function(t){return i("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.title))])})],2)],1)]),e._v(" "),i("li",[i("span",[e._v(e._s(e.$t("permissionlist.permissiondescription")))]),e._v(" "),i("p",[i("Input",{attrs:{type:"textarea"},model:{value:e.descript,callback:function(t){e.descript=t},expression:"descript"}})],1)])])]),e._v(" "),i("Modal",{staticClass:"auditPermissionModal",attrs:{title:"确认删除吗?"},on:{"on-ok":e.confirmDel},model:{value:e.ifDelete,callback:function(t){e.ifDelete=t},expression:"ifDelete"}},[i("p",[e._v("是否删除选中的"+e._s(e.deleteArr.length)+"项")])])],1)],1)};n._withStripped=!0;var s={render:n,staticRenderFns:[]};t.default=s}});