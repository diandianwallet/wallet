webpackJsonp([36],{231:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(313),i=r.n(n);for(var a in n)"default"!==a&&function(e){r.d(t,e,function(){return n[e]})}(a);var s=r(432),o=r.n(s),l=!1;var d=function(e){l||r(430)},c=r(0)(i.a,o.a,!1,d,"data-v-7eab4c48",null);c.options.__file="src\\views\\ctc\\list.vue",t.default=c.exports},313:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),i=(r(11),function(e){return e&&e.__esModule?e:{default:e}}(r(6)));t.default={data:function(){var e=this;return{loginPassModal:!1,totalBalance:0,handleFailModel:!1,handleResultWhenFail:"",queryId:null,btnEvent:"",btnEventString:"",loginPW:"",basicUrl:n.BASICURL,filterSearch:{pageNo:1,pageSize:10},detailOrder:{},currentPageIdx:1,ifLoading:!0,pageNum:null,orderList:[],columns:[{type:"index",width:30,render:function(e,t){return e(expandRow,{props:{skin:t.row.skin,rows:t.row.detail}})}},{title:"下单时间",key:"createTime",minWidth:180},{title:"用户Id",key:"memeber.id",minWidth:100,render:function(e,t){return e("span",{},t.row.member.id)}},{title:"承兑商Id",key:"acceptor.id",minWidth:120,render:function(e,t){return e("span",{},t.row.acceptor.id)}},{title:"订单编号",key:"orderSn",minWidth:180,render:function(e,t){return e("span",{},t.row.orderSn)}},{title:"状态",key:"status",minWidth:95,render:function(e,t){var r="未接单";return 1==t.row.status&&0==t.row.direction?e("div",{},[e("span",{},"已接单")]):1==t.row.status&&1==t.row.direction?e("div",{},[e("span",{},"已接单")]):(2==t.row.status&&(r="★已付款★"),3==t.row.status&&(r="交易完成"),4==t.row.status&&(r="已取消"),5==t.row.status&&(r="申诉中"),6==t.row.status&&(r="放币失败"),e("span",{},r))}},{title:"类型",key:"direction",minWidth:70,render:function(e,t){var r=0==t.row.direction?"买入":"卖出";return e("div",{style:{color:0==t.row.direction?"#42b983":"#FF0000"}},[e("span",{},r)])}},{title:"数量",key:"amount",minWidth:115,render:function(e,t){return e("span",{},t.row.amount)}},{title:"单位",key:"unit",minWidth:100},{title:"单价(CNY)",key:"price",minWidth:105,render:function(e,t){return e("span",{},t.row.price)}},{title:"总额(CNY)",key:"money",minWidth:105,render:function(e,t){return e("span",{},t.row.money.toFixed(2))}},{title:"付款方式",key:"payMode",minWidth:95,render:function(e,t){var r="银行卡";return"alipay"==t.row.payMode&&(r="支付宝"),"wechatpay"==t.row.payMode&&(r="微信支付"),e("span",{},r)}},{title:"用户地址",key:"memberAddress",minWidth:200,render:function(e,t){return e("a",{attrs:{href:"https://www.oklink.com/zh-cn/trx/address/"+t.row.memberAddress,target:"_blank"}},t.row.memberAddress)}},{title:"承兑商地址",key:"acceptorAddress",minWidth:200,render:function(e,t){return e("a",{attrs:{href:"https://www.oklink.com/zh-cn/trx/address/"+t.row.acceptorAddress,target:"_blank"}},t.row.acceptorAddress)}},{title:"平台地址",key:"platAddress",minWidth:200,render:function(e,t){return e("a",{attrs:{href:"https://www.oklink.com/zh-cn/trx/address/"+t.row.platAddress,target:"_blank"}},t.row.platAddress)}},{title:"交易号",key:"txId",minWidth:200,render:function(e,t){return e("a",{attrs:{href:"https://www.oklink.com/zh-cn/trx/tx/"+t.row.txId,target:"_blank"}},t.row.txId)}},{title:"冻结交易号",key:"freezeTxId",minWidth:200,render:function(e,t){return e("a",{attrs:{href:"https://www.oklink.com/zh-cn/trx/tx/"+t.row.freezeTxId,target:"_blank"}},t.row.freezeTxId)}},{title:"退款交易号",key:"RefundTxId",minWidth:200,render:function(e,t){return e("a",{attrs:{href:"https://www.oklink.com/zh-cn/trx/tx/"+t.row.RefundTxId,target:"_blank"}},t.row.RefundTxId)}},{title:"失败原因",key:"cancelReason",minWidth:200},{title:"付款凭证",key:"payImg",width:100,render:function(e,t){if(void 0!=t.row.payImg)return e("a",{attrs:{href:t.row.payImg,target:"_blank"}},"查看图片")}},{title:"申诉人",key:"appealType",minWidth:200,render:function(e,t){var r="";return 1==t.row.appealType&&(r="用户"),2==t.row.appealType&&(r="承兑商"),e("span",{},r)}},{title:"申诉理由",key:"appealReason",minWidth:100},{title:"申诉图片",key:"appealImg",minWidth:100,render:function(e,t){if(void 0!=t.row.appealImg)return e("a",{attrs:{href:t.row.appealImg,target:"_blank"}},"查看图片")}},{title:"申诉时间",key:"appealTime",minWidth:150,render:function(e,t){if(void 0!=t.row.appealTime)return e("span",{},i.default.parseTime(t.row.appealTime/1e3))}},{title:"失败是否处理",key:"isHandleWhenDispute",minWidth:95,render:function(e,t){return 0==t.row.isHandleWhenFail?e("div",{},[e("span",{},"否")]):1==t.row.isHandleWhenFail?e("div",{},[e("span",{},"是")]):void 0}},{title:"失败处理结果",key:"handleResultWhenDispute",minWidth:200},{title:"操作",key:"id",align:"center",fixed:"right",minWidth:150,render:function(t,r){var n="none",i="none",a="none",s="none",o="none";return 0==r.row.status&&(n="inline-block"),1==r.row.status&&(s="inline-block",1==r.row.direction&&(i="inline-block")),2==r.row.status&&(a="inline-block",s="inline-block"),0!=r.row.isHandleWhenDispute||5!=r.row.status&&6!=r.row.status||(o="inline-block"),t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"10px",display:o},on:{click:function(){e.queryId=r.row.id,e.handleFailModel=!0}}},"失败处理"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"10px",display:n},on:{click:function(){e.detailOrder=r.row,e.btnEvent="confirm",e.btnEventString="确定接单吗？ ======> ¥ "+r.row.money,e.loginPassModal=!0}}},"接单"),t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"10px",display:i},on:{click:function(){e.detailOrder=r.row,e.btnEvent="pay",e.btnEventString="确定标记已付款吗？ ======> ¥ "+r.row.money,e.loginPassModal=!0}}},"标记付款"),t("Button",{props:{type:"success",size:"small"},style:{marginRight:"10px",display:a},on:{click:function(){e.detailOrder=r.row,e.btnEvent="complete",e.btnEventString="确定完成放币/扣币吗？ ======> ¥ "+r.row.money,e.loginPassModal=!0}}},"完成放币"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"10px",display:s},on:{click:function(){e.detailOrder=r.row,e.btnEvent="cancel",e.btnEventString="确定强制取消订单吗？ ======> ¥ "+r.row.money,e.loginPassModal=!0}}},"强制取消")])}}],query:{pageNo:1,pageSize:10,directionType:-1,status:-1,isHandleWhenDispute:-1,search:"",member_id:"",acceptor_id:"",startProcessTime:"",endProcessTime:""},processtimeArr:[]}},methods:{handleFail:function(){var e=this;this.ifLoading=!0;var t={id:this.queryId,reason:this.handleResultWhenFail};(0,n.ctcOrderHandleFail)(t).then(function(t){t.code?e.$Message.error(t.message):(e.ifLoading=!1,e.handleFailModel=!1,e.handleResultWhenFail="",e.refreshPage())})},refreshPageManual:function(){for(var e in this.currentPageIdx=1,this.filterSearch)this.filterSearch[e]="";this.filterSearch.pageNo=1,this.filterSearch.pageSize=10,this.refreshPage(this.filterSearch)},changePage:function(e){this.currentPageIdx=e,this.filterSearch.pageNo=e,this.refreshPage(this.filterSearch)},refreshPage:function(e){var t=this;this.ifLoading=!0,this.processtimeArr.length>=2&&this.processtimeArr[0]&&this.processtimeArr[1]&&(this.query.startProcessTime=i.default.parseTime(this.processtimeArr[0]),this.query.endProcessTime=i.default.parseTime(this.processtimeArr[1])),(0,n.ctcOrderList)(this.query).then(function(e){if(e.code)t.$Message.error(e.message);else{t.ifLoading=!1;var r=e.data.list;t.pageNum=e.data&&r.totalElements||1,t.totalBalance=e.data.totalBalance,t.orderList=e.data&&r.content||[],console.log(t.orderList)}})},onSubmit:function(){this.$router.push({path:"",query:this.query}),this.refreshPage()},closeDetail:function(){this.showDetailModal=!1},confirmLoginPass:function(){var e=this;if(""!=this.loginPW){var t={};t.id=this.detailOrder.id,t.password=this.loginPW,"confirm"==this.btnEvent&&(this.$Spin.show(),(0,n.ctcOrderConfirm)(t).then(function(t){t.code?e.$Message.error(t.message):(e.$Message.success("接单成功，请尽快完成付款！"),e.refreshPage(e.filterSearch),e.loginPassModal=!1),e.$Spin.hide()})),"pay"==this.btnEvent&&(this.$Spin.show(),(0,n.ctcOrderPay)(t).then(function(t){t.code?e.$Message.error(t.message):(e.$Message.success("标记已付款成功！"),e.refreshPage(e.filterSearch),e.loginPassModal=!1),e.$Spin.hide()})),"complete"==this.btnEvent&&(this.$Spin.show(),(0,n.ctcOrderComplete)(t).then(function(t){t.code?e.$Message.error(t.message):(e.$Message.success("完成放币成功！"),e.refreshPage(e.filterSearch),e.loginPassModal=!1),e.$Spin.hide()})),"cancel"==this.btnEvent&&(this.$Spin.show(),(0,n.ctcOrderCancel)(t).then(function(t){t.code?e.$Message.error(t.message):(e.$Message.success("取消订单成功！"),e.refreshPage(e.filterSearch),e.loginPassModal=!1),e.$Spin.hide()}))}else this.$Message.error("请输入登录密码")}},created:function(){var e=this.$route.query;this.query=Object.assign(this.query,e),this.query.limit=parseInt(this.query.limit),this.refreshPage()}}},430:function(e,t,r){var n=r(431);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(5)("66f863d6",n,!1,{})},431:function(e,t,r){(e.exports=r(4)(!1)).push([e.i,"\n.ivu-upload[data-v-7eab4c48]{\n  display: inline-block;\n}\n",""])},432:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Row",[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n                C2C订单管理\n                    "),r("Button",{attrs:{type:"primary",size:"small"},on:{click:e.refreshPageManual}},[r("Icon",{attrs:{type:"refresh"}}),e._v("刷新\n                    ")],1)],1),e._v(" "),r("Row",{staticClass:"functionWrapper"},[r("div",{staticClass:"searchWrapper clearfix"},[r("div",{staticClass:"poptip"},[r("span",[e._v("类型")]),e._v(" "),r("Select",{model:{value:e.query.directionType,callback:function(t){e.$set(e.query,"directionType",t)},expression:"query.directionType"}},[r("Option",{attrs:{value:-1}},[e._v("请选择")]),e._v(" "),r("Option",{attrs:{value:0}},[e._v("买入")]),e._v(" "),r("Option",{attrs:{value:1}},[e._v("卖出")])],1)],1),e._v(" "),r("div",{staticClass:"poptip"},[r("span",[e._v("订单状态")]),e._v(" "),r("Select",{model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},[r("Option",{attrs:{value:-1}},[e._v("请选择")]),e._v(" "),r("Option",{attrs:{value:0}},[e._v("未接单")]),e._v(" "),r("Option",{attrs:{value:1}},[e._v("已接单")]),e._v(" "),r("Option",{attrs:{value:2}},[e._v("已付款")]),e._v(" "),r("Option",{attrs:{value:3}},[e._v("已完成")]),e._v(" "),r("Option",{attrs:{value:4}},[e._v("已取消")]),e._v(" "),r("Option",{attrs:{value:5}},[e._v("申诉中")]),e._v(" "),r("Option",{attrs:{value:6}},[e._v("放币失败")])],1)],1),e._v(" "),r("div",{staticClass:"poptip"},[r("span",[e._v("失败后是否处理")]),e._v(" "),r("Select",{model:{value:e.query.isHandleWhenDispute,callback:function(t){e.$set(e.query,"isHandleWhenDispute",t)},expression:"query.isHandleWhenDispute"}},[r("Option",{attrs:{value:-1}},[e._v("请选择")]),e._v(" "),r("Option",{attrs:{value:0}},[e._v("未处理")]),e._v(" "),r("Option",{attrs:{value:1}},[e._v("已处理")])],1)],1),e._v(" "),r("br"),e._v(" "),r("div",{staticClass:"poptip"},[r("span",[e._v("搜索")]),e._v(" "),r("Input",{attrs:{placeholder:e.$t("CTCManagement.searchTip")},model:{value:e.query.search,callback:function(t){e.$set(e.query,"search",t)},expression:"query.search"}})],1),e._v(" "),r("div",{staticClass:"poptip"},[r("span",[e._v("用户id")]),e._v(" "),r("Input",{model:{value:e.query.member_id,callback:function(t){e.$set(e.query,"member_id",t)},expression:"query.member_id"}})],1),e._v(" "),r("div",{staticClass:"poptip"},[r("span",[e._v("承兑商id")]),e._v(" "),r("Input",{model:{value:e.query.acceptor_id,callback:function(t){e.$set(e.query,"acceptor_id",t)},expression:"query.acceptor_id"}})],1),e._v(" "),r("div",{staticClass:"poptip"},[r("span",[e._v("下单时间段")]),e._v(" "),r("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",placeholder:e.$t("currencywithdrawalauditmanagement.pleaseselect")},model:{value:e.processtimeArr,callback:function(t){e.processtimeArr=t},expression:"processtimeArr"}})],1),e._v(" "),r("div",{staticClass:"btns"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("positionmanagementcontractassetmanagement.search")))])],1)])]),e._v(" "),r("Row",[r("Table",{attrs:{columns:e.columns,data:e.orderList,border:"",loading:e.ifLoading}})],1),e._v(" "),r("div",{staticStyle:{"margin-top":"10px"}},[r("span",[e._v("总金额（CNY）："),r("font",{staticStyle:{color:"red"}},[e._v("¥"+e._s(e.totalBalance))])],1)]),e._v(" "),r("div",{staticClass:"pageWrapper"},[r("Page",{attrs:{total:e.pageNum,current:e.currentPageIdx,"show-elevator":""},on:{"on-change":e.changePage}})],1)],1)],1),e._v(" "),r("Modal",{staticClass:"auditModel",attrs:{title:"请输入登录密码",width:"350"},on:{"on-cancle":function(t){e.loginPW=""},"on-ok":e.confirmLoginPass},model:{value:e.loginPassModal,callback:function(t){e.loginPassModal=t},expression:"loginPassModal"}},[r("p",{staticStyle:{"font-size":"16px",color:"#FF0000","margin-bottom":"15px"}},[e._v(e._s(e.btnEventString))]),e._v(" "),r("Input",{attrs:{type:"password",placeholder:"请输入登录密码"},model:{value:e.loginPW,callback:function(t){e.loginPW=t},expression:"loginPW"}})],1),e._v(" "),r("Modal",{staticClass:"auditModel",attrs:{title:"请输入处理失败结果",width:"350"},on:{"on-cancle":function(e){},"on-ok":e.handleFail},model:{value:e.handleFailModel,callback:function(t){e.handleFailModel=t},expression:"handleFailModel"}},[r("Input",{attrs:{placeholder:"请输入失败处理结果"},model:{value:e.handleResultWhenFail,callback:function(t){e.handleResultWhenFail=t},expression:"handleResultWhenFail"}})],1)],1)};n._withStripped=!0;var i={render:n,staticRenderFns:[]};t.default=i}});