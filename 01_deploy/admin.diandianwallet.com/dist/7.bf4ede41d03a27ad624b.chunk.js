webpackJsonp([7],{196:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(277),s=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);var i=n(322),r=n.n(i),l=!1;var c=function(t){l||(n(318),n(320))},p=n(0)(s.a,r.a,!1,c,null,null);p.options.__file="src\\views\\login.vue",e.default=p.exports},277:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(3)),s=(i(n(24)),n(11)),a=(n(12),n(22));function i(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{timer:"",btnDisable:!1,count:0,form:{username:null,password:null,captcha:null},code:null,phoneNum:null,messshow:!1,errormessage:null,logimg:a.BASICURL+"/admin/captcha?cid=ADMIN_LOGIN",rules:{username:[{required:!0,message:this.$t("common.notblank"),trigger:"blur"}],captcha:[{required:!0,message:this.$t("common.notblank"),trigger:"blur"}],password:[{required:!0,message:this.$t("common.notblank"),trigger:"blur"}]},permissions:{},copyRight:"点点工作室 版权信息"}},methods:{getCopyRight:function(){var t=this;(0,a.getConfig)({}).then(function(e){t.copyRight=e.data.copyRight}).catch(function(t){console.log(t)})},cancelSignIn:function(){o.default.remove("userPhone"),window.location.reload()},getCodeTwice:function(){this.count=60,(0,a.getCodeAgain)({phone:this.phoneNum}).then(function(t){}).catch(function(t){console.log(t)})},chanloimg:function(){this.logimg=a.BASICURL+"admin/captcha?cid=ADMIN_LOGIN&a="+Math.random().toFixed(2)},processPermission:function(t){if(""!=t.name&&(this.permissions[t.name]=1),null!=t.subMenu&&t.subMenu.length>0)for(var e=0;e<t.subMenu.length;e++)this.processPermission(t.subMenu[e])},handle:function(){var t=this;(0,a.login)(this.form).then(function(e){e.code?t.$Message.error(e.message):(o.default.set("user",e.data.admin.username,{expires:7}),o.default.set("userInfo",e.data.admin,{expires:7}),o.default.set("adminVersion",e.data.adminVersion,{expires:7}),(0,s.setStore)("leftSidebarList",e.data.permissions),localStorage.setItem("admin-auth-token",e.data.authToken),t.$router.push({name:"home_index"}))}).catch(function(t){return console.log(t)})}},beforeRouteLeave:function(t,e,n){clearInterval(this.timer),window.location.reload(),n()},created:function(){this.phoneNum=o.default.get("userPhone"),clearInterval(this.timer),this.logimg=a.BASICURL+"admin/captcha?cid=ADMIN_LOGIN",this.getCopyRight()},filters:{hidePhoneNum:function(t){return t.split("").fill("*",3,7).join("")}},watch:{count:function(t,e){var n=this;t>0?this.timer=setTimeout(function(){n.count--},1e3):clearInterval(this.timer)},phoneNum:function(t,e){t&&(this.count=0)}}}},318:function(t,e,n){var o=n(319);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(5)("54eb0106",o,!1,{})},319:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"\n.login {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  text-align: center;\n}\n.login-con {\n  display: inline-block;\n  margin-top: 10%;\n  width: 300px;\n}\n.login-con-header {\n  font-size: 16px;\n  font-weight: 300;\n  text-align: center;\n  padding: 30px 0;\n}\n.login-con .form-con {\n  padding: 10px 0 0;\n}\n.login-con .login-tip {\n  font-size: 10px;\n  text-align: center;\n  color: #c3c3c3;\n}\n.login-con .phone-num {\n  font-size: 16px;\n  font-weight: 700;\n  text-align: center;\n  line-height: 32px;\n  border: 1px solid #dddee1;\n}\n",""])},320:function(t,e,n){var o=n(321);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(5)("2f170b20",o,!1,{})},321:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"\n.login .ivu-card{\n\tbackground: #ffffffd9;\n}\n",""])},322:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login",on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handle(e):null}}},[n("div",{staticClass:"login-con"},[n("Card",{attrs:{bordered:!1}},[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"log-in"}}),t._v(" "+t._s(t.$t("login.welcometologin"))+"\n\t\t\t\t")],1),t._v(" "),t.phoneNum?t._e():n("div",{staticClass:"form-con"},[n("Form",{ref:"loginForm",attrs:{model:t.form,rules:t.rules}},[n("FormItem",{attrs:{prop:"username"}},[n("Input",{attrs:{disabled:t.btnDisable,placeholder:t.$t("login.usernameplaceholder")},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[n("Icon",{attrs:{size:16,type:"person"}})],1)])],1),t._v(" "),n("FormItem",{attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",disabled:t.btnDisable,placeholder:t.$t("login.captchapplaceholder")},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[n("Icon",{attrs:{size:14,type:"locked"}})],1)])],1),t._v(" "),n("Row",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("Col",{attrs:{span:"12"}},[n("Input",{attrs:{placeholder:t.$t("login.captchap")},model:{value:t.form.captcha,callback:function(e){t.$set(t.form,"captcha",e)},expression:"form.captcha"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[n("Icon",{attrs:{size:14,type:"locked"}})],1)])],1),t._v(" "),n("Col",{attrs:{span:"10",offset:"2"}},[n("img",{staticStyle:{"vertical-align":"middle",width:"95%",height:"95%"},attrs:{src:t.logimg},on:{click:t.chanloimg}})])],1),t._v(" "),n("FormItem",{staticStyle:{"margin-top":"40px"}},[n("Button",{attrs:{type:"warning",long:""},on:{click:t.handle}},[t._v(t._s(t.$t("common.login")))])],1),t._v(" "),n("p",[t._v(t._s(t.copyRight))]),t._v(" "),t.messshow?n("p",{staticStyle:{color:"red","text-align":"center"}},[t._v(t._s(t.errormessage))]):t._e()],1)],1),t._v(" "),t.phoneNum?n("div",[n("Form",[n("FormItem",[n("p",{staticClass:"phone-num"},[t._v(t._s(t._f("hidePhoneNum")(t.phoneNum)))])]),t._v(" "),n("FormItem",[n("Input",{class:{appendBtn:0===t.count},attrs:{placeholder:t.$t("login.captchapplaceholder")},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[t.count>0?n("Button",{attrs:{slot:"append",disabled:t.count>0},slot:"append"},[t._v(t._s(t.count)+"s"+t._s(t.$t("login.getcaptchaps")))]):0===t.count?n("Button",{attrs:{slot:"append",type:"success"},on:{click:t.getCodeTwice},slot:"append"},[t._v(t._s(t.$t("login.getcaptchap")))]):t._e()],1)],1),t._v(" "),n("FormItem",[n("Row",[n("Col",{attrs:{span:"11"}},[n("Button",{attrs:{type:"warning",long:""},on:{click:t.handle}},[t._v(t._s(t.$t("common.login")))])],1),t._v(" "),n("Col",{attrs:{span:"11",offset:"2"}},[n("Button",{attrs:{long:""},on:{click:t.cancelSignIn}},[t._v(t._s(t.$t("common.cancel")))])],1)],1)],1)],1)],1):t._e()])],1),t._v(" "),n("div",{staticStyle:{position:"absolute",top:"10px","font-size":"14px","margin-top":"10px","margin-left":"30px",color:"rgb(255 238 211)","text-shadow":"1px 0px 2px #000",width:"400px","text-align":"left","border-radius":"5px",padding:"5px 0"}},[t._v(t._s(t.$t("common.connect")))])])};o._withStripped=!0;var s={render:o,staticRenderFns:[]};e.default=s}});