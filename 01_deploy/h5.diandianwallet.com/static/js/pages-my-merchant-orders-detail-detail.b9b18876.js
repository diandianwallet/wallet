(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-merchant-orders-detail-detail"],{"19ab":function(t,e,a){"use strict";a.r(e);var i=a("5830"),s=a("8988");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("7063");var l,o=a("f0c5"),c=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"00e18daa",null,!1,i["a"],l);e["default"]=c.exports},5830:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniPopup:a("008e").default,uniPopupDialog:a("4445").default,uniFilePicker:a("e2d1").default},s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"top"},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(t._f("formatStatus")(t.detail.status)))]),void 0!=t.detail.cancelReason?a("v-uni-view",{staticClass:"desc"},[t._v(t._s(t.detail.cancelReason))]):a("v-uni-view",{staticClass:"desc"},[t._v(t._s(t._f("formatStatusDesc")(t.detail.status)))])],1),a("v-uni-view",{staticClass:"box"},[a("v-uni-view",{staticClass:"label"},[t._v(t._s(t.$t("my.merchant.orders.detail.label1"))+"￥"+t._s(t.detail.money))]),a("v-uni-view",{staticClass:"con"},[a("v-uni-view",{staticClass:"left"},[a("v-uni-view",{staticClass:"row"},[a("v-uni-view",{staticClass:"lab"},[t._v(t._s(t.$t("my.merchant.orders.detail.label2")))]),a("v-uni-view",{staticClass:"val"},[t._v("￥"+t._s(t.detail.price))])],1),a("v-uni-view",{staticClass:"row"},[a("v-uni-view",{staticClass:"lab"},[t._v(t._s(t.$t("my.merchant.orders.detail.label3")))]),a("v-uni-view",{staticClass:"val"},[t._v(t._s(t.detail.amount)+" "+t._s(t.detail.unit))])],1)],1),a("v-uni-view",{staticClass:"right"},[a("v-uni-image",{staticStyle:{width:"56rpx"},attrs:{src:t.coinIcon,mode:"widthFix"}}),a("v-uni-view",{staticClass:"txt"},[t._v(t._s(t.detail.unit))])],1)],1)],1),a("v-uni-view",{staticClass:"divi"}),a("v-uni-view",{staticClass:"box"},[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.label4")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.orderSn))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.label5")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.createTime))])],1)],1),4!=t.detail.status?[a("v-uni-view",{staticClass:"divi"}),a("v-uni-view",{staticClass:"box"},[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.payType))])],1),t.detail.bankInfo?[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.realname")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.bankInfo.bankName))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.bankcode")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.bankInfo.cardNo))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.bank")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.bankInfo.bank))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.bank2")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.bankInfo.branch))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.remark")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.bankInfo.bankRemark))])],1)]:t._e(),t.detail.alipay?[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.realname")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.alipay.aliName))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.alipaycode")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.alipay.aliNo))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.remark")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.alipay.aliRemark))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.qrcode")))]),a("v-uni-view",{staticClass:"right"},[a("v-uni-image",{staticStyle:{width:"200rpx",height:"200rpx"},attrs:{src:t.detail.alipay.qrCodeUrl,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showQrcode(t.detail.alipay.qrCodeUrl)}}})],1)],1)]:t._e(),t.detail.wechatPay?[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.realname")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.wechatPay.wechatName))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.wxcode")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.wechatPay.wechat))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.remark")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.wechatPay.wechatRemark))])],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.qrcode")))]),a("v-uni-view",{staticClass:"right"},[a("v-uni-image",{staticStyle:{width:"200rpx",height:"200rpx"},attrs:{src:t.detail.wechatPay.qrWeCodeUrl,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showQrcode(t.detail.wechatPay.qrWeCodeUrl)}}})],1)],1)]:t._e(),t.detail.payImg?a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.paycert")))]),a("v-uni-view",{staticClass:"right"},[a("v-uni-image",{staticStyle:{width:"200rpx",height:"200rpx"},attrs:{src:t.detail.payImg,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showQrcode(t.detail.payImg)}}})],1)],1):t._e(),0!=t.detail.appealType?a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.appealUser")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(1==t.detail.appealType?"用户":"承兑商"))])],1):t._e(),t.detail.appealReason?a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.appealReason")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.appealReason))])],1):t._e(),t.detail.appealTime?a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.appealTime")))]),a("v-uni-view",{staticClass:"right"},[t._v(t._s(t.detail.appealTime))])],1):t._e(),t.detail.appealImg?a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"left"},[t._v(t._s(t.$t("my.merchant.orders.detail.appealCert")))]),a("v-uni-view",{staticClass:"right"},[a("v-uni-image",{staticStyle:{width:"200rpx",height:"200rpx"},attrs:{src:t.detail.appealImg,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showQrcode(t.detail.appealImg)}}})],1)],1):t._e()],2)]:t._e(),a("v-uni-view",{staticClass:"btm"},[a("v-uni-view",{staticClass:"bbox"},[t.showPay?a("v-uni-view",{staticClass:"tip"},[t._v(t._s(t.$t("my.merchant.orders.detail.tip")))]):t._e(),a("v-uni-view",{staticClass:"btns"},[t.showCancel?a("v-uni-button",{staticClass:"cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelOrder.apply(void 0,arguments)}}},[t._v(t._s(t.$t("my.merchant.orders.detail.cancel")))]):t._e(),t.showPay?a("v-uni-button",{staticClass:"pay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showUpload.apply(void 0,arguments)}}},[t._v(t._s(t.$t("my.merchant.orders.detail.pay")))]):t._e(),t.showJiedan?a("v-uni-button",{staticClass:"pay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jieOrder.apply(void 0,arguments)}}},[t._v(t._s(t.$t("my.merchant.orders.detail.jie")))]):t._e(),t.showComplete?a("v-uni-button",{staticClass:"pay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.completeOrder.apply(void 0,arguments)}}},[t._v(t._s(t.$t("my.merchant.orders.detail.complete")))]):t._e(),t.showAppeal?a("v-uni-button",{staticClass:"pay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitAppealBtn.apply(void 0,arguments)}}},[t._v(t._s(t.$t("my.merchant.orders.detail.appeal")))]):t._e()],1)],1)],1),a("uni-popup",{ref:"inputDialog",attrs:{type:"dialog"}},[a("uni-popup-dialog",{attrs:{mode:"input",title:t.$t("common").pwd_title,"input-type":"password",placeholder:t.$t("common").pwd_plac,confirmText:t.$t("common.confirm"),cancelText:t.$t("common.cancel")},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.dialogInputConfirm.apply(void 0,arguments)}}})],1),a("uni-popup",{ref:"popup",attrs:{"background-color":"#fff"}},[a("v-uni-view",{staticClass:"popup-content"},[a("v-uni-view",{staticClass:"tip"},[t._v(t._s(t.$t("my.merchant.orders.detail.tip2")))]),a("uni-file-picker",{attrs:{fileMediatype:"image",mode:"grid",limit:"1","auto-upload":!1},on:{select:function(e){arguments[0]=e=t.$handleEvent(e),t.select.apply(void 0,arguments)}},model:{value:t.imageValue,callback:function(e){t.imageValue=e},expression:"imageValue"}}),a("v-uni-view",{staticClass:"btns"},[a("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$refs.popup.close()}}},[t._v(t._s(t.$t("common.cancel")))]),a("v-uni-button",{staticClass:"pay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payOrder.apply(void 0,arguments)}}},[t._v(t._s(t.$t("common.confirm")))])],1)],1)],1),a("uni-popup",{ref:"popup2",attrs:{"background-color":"#fff",type:"dialog"}},[a("v-uni-view",{staticClass:"popup-content container"},[a("v-uni-view",{staticClass:"tip"},[t._v(t._s(t.$t("my.merchant.orders.detail.tip3")))]),a("v-uni-input",{staticClass:"input-ui u-border",attrs:{type:"text",placeholder:"请输入申诉理由"},model:{value:t.appealReason,callback:function(e){t.appealReason=e},expression:"appealReason"}}),a("uni-file-picker",{attrs:{fileMediatype:"image",mode:"grid",limit:"1","auto-upload":!1},on:{select:function(e){arguments[0]=e=t.$handleEvent(e),t.select.apply(void 0,arguments)}},model:{value:t.imageValue,callback:function(e){t.imageValue=e},expression:"imageValue"}}),a("v-uni-view",{staticClass:"btns"},[a("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$refs.popup2.close()}}},[t._v(t._s(t.$t("common.cancel")))]),a("v-uni-button",{staticClass:"pay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitAppeal.apply(void 0,arguments)}}},[t._v(t._s(t.$t("common.confirm")))])],1)],1)],1)],2)},n=[]},"687d":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.input-ui[data-v-00e18daa]{border:%?1?% solid #dadbde;padding:%?12?% %?18?%;border-radius:%?8?%;font-size:%?30?%;color:#303133}.divi[data-v-00e18daa]{height:%?20?%;background-color:#eef2f5}.top[data-v-00e18daa]{background:#0952c3;font-size:%?24?%;padding:%?160?% %?30?% %?40?% %?30?%;color:#8b9faa}.top .title[data-v-00e18daa]{font-size:%?40?%;color:#fff}.box[data-v-00e18daa]{padding:0 %?30?%}.box .label[data-v-00e18daa]{display:block;color:#0952c3;padding:%?20?% 0;font-weight:700;font-size:%?34?%}.box .con[data-v-00e18daa]{display:flex;align-items:center;justify-content:space-between}.box .con .row[data-v-00e18daa]{display:flex;align-items:center}.box .con .row .lab[data-v-00e18daa]{margin-right:%?20?%;color:#8b9faa}.box .con .right[data-v-00e18daa]{text-align:center}.box .item[data-v-00e18daa]{display:flex;align-items:center;justify-content:space-between;padding:%?30?% 0;border-bottom:1px solid #f3f3f3}.box .item[data-v-00e18daa]:last-child{border-bottom:none}.btm[data-v-00e18daa]{height:%?240?%}.btm .bbox[data-v-00e18daa]{position:fixed;bottom:0;left:0;width:100%;background-color:#fff}.btm .bbox .tip[data-v-00e18daa]{font-size:%?24?%;color:#0952c3;background:#e8f2fc;padding:%?20?% %?30?%}.btm .bbox .btns[data-v-00e18daa]{display:flex;flex-direction:row;justify-content:space-between;padding:%?20?% %?30?%}.btm .bbox .btns .cancel[data-v-00e18daa]{width:35%;font-size:%?28?%}.btm .bbox .btns .appy[data-v-00e18daa]{background:#f0ad4e!important;width:35%!important}.btm .bbox .btns .pay[data-v-00e18daa]{width:45%;border:0;border-radius:0;background-color:#0952c3;color:#fff;font-size:%?28?%}.popup-content[data-v-00e18daa]{width:%?600?%;text-align:center}.popup-content .tip[data-v-00e18daa]{font-size:%?34?%;padding:%?20?%;padding-top:%?50?%}.popup-content .uni-file-picker[data-v-00e18daa]{margin:%?50?% auto}.popup-content .uni-file-picker[data-v-00e18daa] .uni-file-picker__container{justify-content:center}.popup-content .btns[data-v-00e18daa]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?30?%}.popup-content .btns uni-button[data-v-00e18daa]{width:40%}.popup-content .btns .pay[data-v-00e18daa]{background-color:#0952c3;color:#fff}',""]),t.exports=e},7063:function(t,e,a){"use strict";var i=a("f4ba"),s=a.n(i);s.a},8988:function(t,e,a){"use strict";a.r(e);var i=a("ce73"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},ce73:function(t,e,a){"use strict";var i=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,n=i(a("5530")),l=a("26cb"),o={data:function(){return{id:0,detail:{},memberLevel:0,coinIcon:"",imageValue:[],appealReason:""}},filters:{formatStatus:function(t){return 0==t?s.$t("my.merchant.orders.status0"):1==t?s.$t("my.merchant.orders.status1"):2==t?s.$t("my.merchant.orders.status2"):3==t?s.$t("my.merchant.orders.status3"):4==t?s.$t("my.merchant.orders.status4"):5==t?s.$t("my.merchant.orders.status5"):6==t?s.$t("my.merchant.orders.status6"):"-"},formatStatusDesc:function(t){return 0==t?s.$t("my.merchant.orders.detail.desc0"):1==t?0==s.detail.direction?s.$t("my.merchant.orders.detail.desc10"):s.$t("my.merchant.orders.detail.desc11"):2==t?0==s.detail.direction?s.$t("my.merchant.orders.detail.desc20"):s.$t("my.merchant.orders.detail.desc21"):3==t?s.$t("my.merchant.orders.detail.desc3"):4==t?s.$t("my.merchant.orders.detail.desc4"):5==t?s.$t("my.merchant.orders.detail.desc5"):6==t?s.$t("my.merchant.orders.detail.desc6"):"-"}},onLoad:function(t){s=this,uni.setNavigationBarTitle({title:this.$t("my.merchant.orders.detail").title}),this.id=t.id,this.memberLevel=t.memberLevel,this.getDetail()},computed:(0,n.default)((0,n.default)({},(0,l.mapGetters)(["config","setting","userInfo"])),{},{payType:function(){return this.detail.alipay?this.$t("my.merchant.orders.detail.alipay"):this.detail.bankInfo?this.$t("my.merchant.orders.detail.banktype"):this.detail.wechatPay?this.$t("my.merchant.orders.detail.wxpay"):"-"},showCancel:function(){return this.memberLevel<2&&0==this.detail.status},showPay:function(){var t=(0==this.memberLevel&&0==this.detail.direction||2==this.memberLevel&&1==this.detail.direction)&&1==this.detail.status;return console.log("showPay result="+t),t},showJiedan:function(){return 2==this.memberLevel&&0==this.detail.status},showComplete:function(){var t=2==this.detail.status&&(2==this.memberLevel&&0==this.detail.direction||0==this.memberLevel&&1==this.detail.direction);return console.log("showComplete result="+t),t},showAppeal:function(){var t=2==this.detail.status;if(null!=this.detail.payTime){var e=(new Date).getTime(),a=new Date(this.detail.payTime).getTime();t=e<=a+18e5?t&&0:t&&1}return t}}),methods:{getDetail:function(){var t=this;this.$tools.apiPost("uc/ctc/detail",{oid:this.id},(function(e){t.detail=e.data,t.$tools.apiGet("uc/coin/icon",{unit:t.detail.unit},(function(e){t.coinIcon=e.data}))}))},showQrcode:function(t){uni.previewImage({urls:[t]})},cancelOrder:function(){var t=this;uni.showLoading({title:"处理中"}),this.$tools.apiPost("uc/ctc/cancel-ctc-order",{oid:this.id,memberLevel:this.memberLevel},(function(e){uni.hideLoading(),t.$tools.success(t.$t("my.merchant.orders.detail.cancelSuccess"),(function(){t.getDetail()}))}))},showUpload:function(){this.$refs.popup.open()},payOrder:function(){var t=this;this.imageValue.length<=0?this.$tools.error(this.$t("my.merchant.orders.detail.tip2")):(this.$refs.popup.close(),uni.showLoading({title:"处理中"}),this.$tools.apiPost("uc/ctc/pay-ctc-order",{oid:this.id,memberLevel:this.memberLevel,payImg:this.imageValue[0].url},(function(e){uni.hideLoading(),t.$tools.success(t.$t("my.merchant.orders.detail.paySuccess"),(function(){t.getDetail()}))})))},jieOrder:function(){var t=this;uni.showLoading({title:"处理中"}),this.$tools.apiPost("uc/ctc/accept-ctc-order",{oid:this.id},(function(e){uni.hideLoading(),t.$tools.success(t.$t("my.merchant.orders.detail.acceptSuccess"),(function(){t.getDetail()}))}))},completeOrder:function(){var t=this;this.setting?this.showPwd():this.$tools.apiPost("uc/approve/security/setting",{},(function(e){t.$store.dispatch("setSetting",e.data).then((function(){t.showPwd()}))}))},submitAppealBtn:function(){this.$refs.popup2.open()},submitAppeal:function(){var t=this;if(""!=this.appealReason){this.$refs.popup2.close();var e={id:this.id,reason:this.appealReason,type:2==this.memberLevel?2:1,img:this.imageValue.length>0?this.imageValue[0].url:null};uni.showLoading({title:"处理中"}),this.$tools.apiPost("uc/ctc/appeal",e,(function(e){uni.hideLoading(),t.$tools.success(t.$t("my.merchant.orders.detail.completeSuccess"),(function(){t.getDetail(),t.appealReason="",t.imageValue=[]}))}))}else this.$tools.error(this.$t("my.merchant.orders.detail.needAppealReason"))},showPwd:function(){1==this.setting.fundsVerified?this.$refs.inputDialog.open():this.$tools.confirm(this.$t("common.pwd_tip"),(function(){uni.navigateTo({url:"/pages/my/pay_pwd/pay_pwd"})}))},dialogInputConfirm:function(t){var e=this;uni.showLoading({title:"处理中"}),this.$tools.apiPost("uc/ctc/complete-order",{oid:this.id,memberLevel:this.memberLevel,fundpwd:t},(function(t){uni.hideLoading(),e.$tools.success(e.$t("my.merchant.orders.detail.completeSuccess"),(function(){e.getDetail()}))}))},select:function(t){var e=this;this.$tools.uploadFile(t.tempFilePaths[0],{},(function(t){e.imageValue=[{name:t.data,extname:"jpg",url:t.data}]}))}}};e.default=o},f4ba:function(t,e,a){var i=a("687d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("4f06").default;s("0d8327c0",i,!0,{sourceMap:!1,shadowMode:!1})}}]);